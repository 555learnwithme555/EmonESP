<html>
    <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.8">
    <title>EmonESP</title>
    </head>

    <body>
      <link rel="stylesheet" type="text/css" href="style.css">
         <div id="page">
            <div class="box">
            <img src="logo.png" alt="EmonESP">
            <h1>EmonESP</h1>

            <p>Hello! To set up: select a WiFi network, enter passkey and <a href="https://emoncms.org">Emoncms.org</a> R/W apikey.</p>
            </div>

            <div class="box380">
                <h2>Wifi Config</h2>

                <p><b>Mode:</b> <span id="mode"></span></p>

                <div id="client-view" style="display:none">
                    <p><b>Network SSID:</b><br><span id="sta-ssid"></span></p>
                    <p><b>IP Address:</b><br><span id="sta-ip"></span></p>
                    <button id="apoff" style="display:none">Turn off Access Point</button>
                    <button id="reset">Factory Reset</button>
                </div>

                <div id="ap-view" style="display:none">
                    <p>Connect to network:</p>
                    <table>
                        <tr><th>Select</th><th>Network</th></tr>
                        <tbody id="networks"></tbody>
                    </table>

                    <p><b>Passkey:</b><br>
                    <input id="passkey" type="text" style="width:280px;">
                    <button id="connect">Connect</button>
                    </p>
                </div>

                <div id="wait-view" style="display:none">
                    <p>Connecting to WiFi Network...</p>
                </div>
            </div>

            <div class="box380">
                <h2>Emoncms Config</h2>
                <p><b>Emoncms Server:</b><br>
                <input id="emoncms_server" type="text" value="emoncms.org" style="width:280px;">
                </p>e.g 'emoncms.org', 'emonpi/emoncms', or '192.168.1.4/emoncms'<br>
                <p><b>Write apikey:</b><br>
                <input id="apikey" type="text" style="width:280px;">
                <button id="save-apikey">Save</button>
                <p><b>Connected:</b><br><span id="emoncms_connected"></span></p>
                <p><b>Successful packets:</b><br><span id="sta-psuccess"></span> / <span id="sta-psent"  ></span></p>
                </p>
            </div>
            
            <div class="box380">
                <h2>MQTT Config</h2>
                <p><b>MQTT Server (port 1883):</b><br>
                <input id="mqtt_server" type="text" style="width:280px;">
                </p>e.g 'emonpi', 'test.mosquitto.org', or '192.168.1.4'<br>
                <p><b>Username:</b><br>
                <input id="mqtt_user" type="text" style="width:280px;">
                </p>Leave blank for no authentication<br>
                <p><b>Password:</b><br>
                <input id="mqtt_pass" type="text" style="width:280px;">
                </p>Leave blank for no authentication<br><p></p>
                <button id="save-mqtt">Save</button>
                <p><b>Connected:</b><br><span id="mqtt_connected"></span></p>
                </p>
            </div>
            
    


            <div class="box380">
                <h2>Latest data values</h2>
                <table>
                    <tr><th>Name</th><th>Value</th></tr>
                    <tbody id="datavalues"></tbody>
                </table>
            </div>

            <div class="box380">
                <h2>Firmware</h2>
                <div id="firmware" style="display:none">
                <table>
                    <tr><th>Running</th><th>Latest</th></tr>
                    <tbody id="firmware-version" ></tbody></tbody>
                </table>
                <br>
                <a href="https://github.com/openenergymonitor/EmonESP/releases">View changelog</a>
                <br> </div><br>
                <button id="updatecheck">Check for Updates</button>
                <button id="update" style="display:none">Apply Update</button>
                <p><span id="update-info"></span></p>
                <button id="upload">Upload</button>
            </div>
            
            <div class="box380">
                <h2>System info</h2>
                <p><b>Free Heap:</b><br><span id="free_heap"></span>B</p>
                
            </div>

            <div style="clear:both"></div>
        </div>

    </body>
</html>

<script src="config.js"></script>
