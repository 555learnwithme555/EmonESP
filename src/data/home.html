<!doctype html>

<html lang="en">

<head>
<meta charset="utf-8">
<title>emonESP</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="viewport" content="width=device-width, user-scalable=no" />
<meta name="description" content="emonESP">
<meta name="author" content="OpenEnergyMonitor">
<meta name="theme-color" content="#000000" />
<link rel="stylesheet" type="text/css" href="style.css">
</head>



    <body>
         <div id="page">
            <div class="box">
            <img src="logo.png" alt="EmonESP">
            <h1>emonESP</h1>

            </div>

            <div class="box380">
                <h2>Wifi Config</h2>

                <p><b>Mode:</b> <span id="mode"></span></p>

                <div id="client-view" style="display:none">
                    <p><b>Network SSID:</b><br><span id="sta-ssid"></span></p>
                    <p><b>IP Address:</b><br><span id="sta-ip"></span></p>
                    <button id="apoff" style="display:none">Turn off Access Point</button>
                    <button id="reset">Factory Reset</button>
                </div>

                <div id="ap-view" style="display:none">
                    <p>Connect to network:</p>
                    <table>
                        <tr> <th>Select</th> <th>Network</th> <th>RSSI</th> </tr>
                        <tbody id="networks"></tbody>
                    </table>

                    <p><b>Passkey:</b><br>
                    <input id="passkey" type="text" style="width:280px;">
                    <button id="connect">Connect</button>
                    </p>
                </div>

                <div id="wait-view" style="display:none">
                    <p>Connecting to WiFi Network...Please wait 10s</p>
                </div>
            </div>

            <div class="box380">
                <h2>Emoncms Config</h2>
                <p><b>Emoncms Server:</b><br>
                <input id="emoncms_server" type="text" value="emoncms.org" style="width:280px;">
                </p>e.g 'emoncms.org', 'emonpi/emoncms', or '192.168.1.4/emoncms'<br>
                <p><b>Node:</b><br>
                <input id="emoncms_node" type="text" value="emonesp" style="width:280px;">
              </p>Emoncms node name (no spaces) e.g 'emonesp' or 'heatpump' etc.<br><p></p>
                <p><b>Write apikey:</b><br>
                <input id="emoncms_apikey" type="text" style="width:280px;"><br><br>
                <button id="save-emoncms">Save</button>
                <p><b>Connected:</b><br><span id="emoncms_connected"></span></p>
                <p><b>Successful packets:</b><br><span id="sta-psuccess"></span> / <span id="sta-psent"  ></span></p>
            </div>

            <div class="box380">
                <h2>MQTT Config</h2>
                <p><b>MQTT Server
                *:</b><br>
                <input id="mqtt_server" type="text" style="width:280px;">
                </p>e.g 'emonpi', 'test.mosquitto.org', or '192.168.1.4'<br>
                <p><b>MQTT Topic*:</b><br>
                <input id="mqtt_topic" type="text" style="width:280px;">
                </p>Base topic e.g 'emonesp', 'emon/heatpump'<br>
                <p><b>Username:</b><br>
                <input id="mqtt_user" type="text" style="width:280px;">
                </p>Leave blank for no authentication<br>
                <p><b>Password:</b><br>
                <input id="mqtt_pass" type="password" style="width:280px;">
                </p>Leave blank for no authentication<br><p>
                <p><b>*Required </b></p>
                <button id="save-mqtt">Save</button>
                <p><b>Connected:</b><br><span id="mqtt_connected"></span></p>
            </div>




            <div class="box380">
                <h2>Latest data values</h2>
                <table>
                    <tr><th>Key</th><th>Value</th></tr>
                    <tbody id="datavalues"></tbody>
                </table>
            </div>

            <div class="box380">
                <h2>Firmware</h2>
                <div id="firmware" style="display:none">
                <table>
                    <tr><th>Running</th><th>Latest</th></tr>
                    <tbody id="firmware-version" ></tbody>
                </table>
                <br>
                <a href="https://github.com/openenergymonitor/EmonESP/releases">View changelog</a>
                <br> </div><br>
                <button id="updatecheck">Check for Updates</button>
                <button id="update" style="display:none">Apply Update</button>
                <p><span id="update-info"></span></p>
                <button id="upload">Upload</button>
            </div>

            <div class="box380">
                <h2>ESP info</h2>
                <p><b>Flash Size:</b><br><span id="flash_size"></span>B</p>
                <p><b>Vcc:</b><br><span id="vcc"></span>V</p>
                <p><b>Free RAM:</b><br><span id="free_heap"></span>B</p>

            </div>

            <div style="clear:both"></div>
        </div>

    </body>
</html>

<script type="text/javascript" src="config.js"></script>
